<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soneium Mastery Pro</title>
    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
    <style>
        :root {
            --bg: #050505;
            --card-bg: rgba(20, 20, 20, 0.8);
            --primary: #8957e5;
            --secondary: #db61a2;
            --success: #238636;
            --info: #1f6feb;
            --warning: #f59e0b;
            --text: #f0f6fc;
            --border: rgba(255, 255, 255, 0.1);
        }

        body {
            background-color: var(--bg);
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(137, 87, 229, 0.1) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(219, 97, 162, 0.1) 0%, transparent 40%);
            color: var(--text);
            font-family: 'Inter', -apple-system, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }

        .container {
            background: var(--card-bg);
            backdrop-filter: blur(12px);
            border: 1px solid var(--border);
            border-radius: 24px;
            width: 100%;
            max-width: 420px;
            padding: 30px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }

        .header { text-align: center; margin-bottom: 25px; }
        .header h1 { font-size: 1.5rem; margin: 0; background: linear-gradient(90deg, #8957e5, #db61a2); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .header p { font-size: 0.8rem; color: #8b949e; margin-top: 5px; }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }

        .stat-item {
            background: rgba(255,255,255,0.05);
            padding: 12px;
            border-radius: 12px;
            text-align: center;
            border: 1px solid var(--border);
        }

        .stat-label { font-size: 0.65rem; text-transform: uppercase; color: #8b949e; display: block; }
        .stat-value { font-size: 1.1rem; font-weight: bold; font-family: 'Mono', monospace; }

        .btn-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .btn-full { grid-column: span 2; }

        .btn {
            padding: 12px;
            border-radius: 10px;
            border: 1px solid rgba(255,255,255,0.1);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.85rem;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn:hover { transform: translateY(-2px); filter: brightness(1.2); }
        .btn:active { transform: translateY(0); }

        .btn-connect { background: var(--success); box-shadow: 0 4px 15px rgba(35, 134, 54, 0.3); }
        .btn-nft { background: var(--secondary); box-shadow: 0 4px 15px rgba(219, 97, 162, 0.3); }
        .btn-wrap { background: var(--info); box-shadow: 0 4px 15px rgba(31, 111, 235, 0.3); }
        .btn-poke { background: var(--primary); box-shadow: 0 4px 15px rgba(137, 87, 229, 0.3); }
        .btn-send { background: var(--warning); box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3); }
        .btn-stop { background: #dc2626 !important; animation: pulse 1.5s infinite; }

        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.7; } 100% { opacity: 1; } }

        .section-title { font-size: 0.7rem; color: #8b949e; margin: 20px 0 10px 0; text-transform: uppercase; letter-spacing: 1px; display: flex; align-items: center; gap: 8px; }
        .section-title::after { content: ""; height: 1px; background: var(--border); flex-grow: 1; }

        .terminal {
            background: #010409;
            border: 1px solid #30363d;
            border-radius: 12px;
            padding: 12px;
            margin-top: 20px;
            height: 120px;
            overflow-y: auto;
            font-family: 'Consolas', monospace;
            font-size: 0.75rem;
            line-height: 1.4;
            color: #7ee787;
        }

        .terminal::-webkit-scrollbar { width: 4px; }
        .terminal::-webkit-scrollbar-thumb { background: #30363d; border-radius: 10px; }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>SONEIUM PRO</h1>
        <p>Advanced Builder Dashboard</p>
    </div>

    <button id="connectBtn" class="btn btn-full btn-connect" onclick="connect()">Connect Wallet</button>

    <div id="controls" style="display:none;">
        <div class="stats-grid">
            <div class="stat-item">
                <span class="stat-label">Builder NFTs</span>
                <span id="nftCount" class="stat-value">0</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Session TXs</span>
                <span id="sessionTxs" class="stat-value">0</span>
            </div>
        </div>

        <div class="section-title">Identity & Assets</div>
        <div class="btn-grid">
            <button class="btn btn-nft btn-full" onclick="mintNFT()">âœ¨ Mint Builder NFT</button>
            <button class="btn btn-send btn-full" onclick="sendSelf()">ðŸ’¸ Native Self-Transfer</button>
        </div>

        <div class="section-title">Automation & DeFi</div>
        <div class="btn-grid">
            <button id="autoWrapBtn" class="btn btn-wrap" onclick="toggleAutoWrap()">ðŸ”„ Auto Wrap</button>
            <button class="btn btn-wrap" style="background:#484f58" onclick="unwrapETH()">ðŸ”“ Unwrap All</button>
            <button id="spamBtn" class="btn btn-poke btn-full" onclick="runSpam()">ðŸ§ª Contract Poke Spammer</button>
        </div>
    </div>

    <div class="terminal" id="log">Status: Ready to initialize...</div>
</div>

<script>
    // --- CONTRACT SETTINGS ---
    const NFT_CONTRACT = "0xe134662e9CDf904Ea3D90dB3F527054ED3687d83";
    const POKE_CONTRACT = "0xac3fa700149513bed425398f10a08767Aef138c3";
    const WETH_CONTRACT = "0x4200000000000000000000000000000000000006";
    
    const NFT_ABI = [{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"mint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"}];

    let signer, spamInterval, wrapInterval;
    let isSpamming = false, isWrapping = false, txCount = 0;

    async function connect() {
        if (!window.ethereum) return alert("Wallet not found!");
        const provider = new ethers.providers.Web3Provider(window.ethereum);
        await provider.send("eth_requestAccounts", []);
        signer = provider.getSigner();
        document.getElementById("controls").style.display = "block";
        document.getElementById("connectBtn").innerText = "Wallet Connected";
        addLog("Secure link established.");
        checkNFTBalance();
    }

    function addLog(msg) {
        const div = document.getElementById("log");
        div.innerHTML += `[${new Date().toLocaleTimeString()}] ${msg}<br>`;
        div.scrollTop = div.scrollHeight;
    }

    function updateCounter() {
        txCount++;
        document.getElementById("sessionTxs").innerText = txCount;
    }

    async function checkNFTBalance() {
        try {
            const contract = new ethers.Contract(NFT_CONTRACT, NFT_ABI, signer);
            const address = await signer.getAddress();
            const balance = await contract.balanceOf(address);
            document.getElementById("nftCount").innerText = balance.toString();
        } catch (e) { console.log("Balance failed"); }
    }

    async function sendSelf() {
        try {
            const address = await signer.getAddress();
            addLog("Initiating native transfer...");
            const tx = await signer.sendTransaction({
                to: address,
                value: ethers.utils.parseEther("0.000001")
            });
            addLog("TX: " + tx.hash.slice(0,10));
            await tx.wait();
            addLog("Confirmed âœ…");
            updateCounter();
        } catch (e) { addLog("Rejected."); }
    }

    async function mintNFT() {
        try {
            const contract = new ethers.Contract(NFT_CONTRACT, NFT_ABI, signer);
            const tx = await contract.mint();
            addLog("Minting identity token...");
            await tx.wait();
            addLog("NFT Minted âœ…");
            updateCounter();
            checkNFTBalance();
        } catch (e) { addLog("Mint failed."); }
    }

    async function toggleAutoWrap() {
        const btn = document.getElementById("autoWrapBtn");
        if (isWrapping) {
            clearInterval(wrapInterval);
            isWrapping = false;
            btn.innerText = "ðŸ”„ Auto Wrap";
            btn.classList.remove("btn-stop");
            addLog("Auto-Wrap Terminated.");
            return;
        }
        isWrapping = true;
        btn.innerText = "STOP AUTO";
        btn.classList.add("btn-stop");
        addLog("Loop: 0.000001 ETH Wrap...");
        
        wrapInterval = setInterval(async () => {
            try {
                const contract = new ethers.Contract(WETH_CONTRACT, ["function deposit() public payable"], signer);
                const tx = await contract.deposit({ value: ethers.utils.parseEther("0.000001") });
                addLog("WETH TX: " + tx.hash.slice(0,10));
                await tx.wait();
                updateCounter();
            } catch (e) { }
        }, 5000);
    }

    async function unwrapETH() {
        try {
            const contract = new ethers.Contract(WETH_CONTRACT, ["function withdraw(uint256 wad) public", "function balanceOf(address) view returns (uint256)"], signer);
            const bal = await contract.balanceOf(await signer.getAddress());
            const tx = await contract.withdraw(bal);
            addLog("De-wrapping assets...");
            await tx.wait();
            addLog("WETH -> ETH âœ…");
            updateCounter();
        } catch (e) { addLog("Unwrap failed."); }
    }

    async function runSpam() {
        const btn = document.getElementById("spamBtn");
        if (isSpamming) {
            clearInterval(spamInterval);
            isSpamming = false;
            btn.innerText = "ðŸ§ª Contract Poke Spammer";
            btn.classList.remove("btn-stop");
            return;
        }
        isSpamming = true;
        btn.innerText = "STOP POKING";
        btn.classList.add("btn-stop");
        spamInterval = setInterval(async () => {
            try {
                const contract = new ethers.Contract(POKE_CONTRACT, ["function poke() public"], signer);
                const tx = await contract.poke();
                addLog("Poke TX: " + tx.hash.slice(0,10));
                await tx.wait();
                updateCounter();
            } catch (e) { }
        }, 4000);
    }
</script>
</body>
</html>
